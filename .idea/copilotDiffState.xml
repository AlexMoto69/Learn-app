<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/learn-app/src/pages/Upload.jsx">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/learn-app/src/pages/Upload.jsx" />
              <option name="originalContent" value="import React, { useState, useRef } from 'react'&#10;import './Upload.css'&#10;&#10;export default function Upload({ onBack = () =&gt; {} }) {&#10;  const [file, setFile] = useState(null)&#10;  const [error, setError] = useState(null)&#10;  const [uploading, setUploading] = useState(false)&#10;  const inputRef = useRef(null)&#10;&#10;  function onChoose(e) {&#10;    const f = (e.target &amp;&amp; e.target.files &amp;&amp; e.target.files[0]) || null&#10;    handleFile(f)&#10;  }&#10;&#10;  function handleFile(f) {&#10;    setError(null)&#10;    if (!f) return setFile(null)&#10;    // basic client-side validation: size limit 10MB&#10;    if (f.size &gt; 10 * 1024 * 1024) {&#10;      setError('Fișierul este prea mare (max 10 MB)')&#10;      return&#10;    }&#10;    setFile(f)&#10;  }&#10;&#10;  function onDrop(e) {&#10;    e.preventDefault()&#10;    e.stopPropagation()&#10;    const f = (e.dataTransfer &amp;&amp; e.dataTransfer.files &amp;&amp; e.dataTransfer.files[0]) || null&#10;    handleFile(f)&#10;  }&#10;&#10;  function onDragOver(e) { e.preventDefault(); e.stopPropagation() }&#10;&#10;  async function onUpload() {&#10;    if (!file) return setError('Alege un fișier înainte de upload')&#10;    setUploading(true)&#10;    setError(null)&#10;&#10;    try {&#10;      // Demo: we won't actually send the file unless you enable endpoint.&#10;      // Example POST using FormData (uncomment &amp; set URL to use):&#10;      // const form = new FormData();&#10;      // form.append('file', file);&#10;      // const res = await fetch('http://localhost:5000/api/upload', { method: 'POST', body: form });&#10;      // const json = await res.json();&#10;&#10;      // Simulate delay&#10;      await new Promise((r) =&gt; setTimeout(r, 700))&#10;      console.log('Uploaded (demo):', file.name, file.size, file.type)&#10;      alert('Upload demo complet: ' + file.name)&#10;      setFile(null)&#10;    } catch (e) {&#10;      console.error(e)&#10;      setError('Eroare la upload (demo)')&#10;    } finally {&#10;      setUploading(false)&#10;    }&#10;  }&#10;&#10;  const preview = file &amp;&amp; file.type &amp;&amp; file.type.startsWith('image/')&#10;&#10;  return (&#10;    &lt;div className=&quot;upload-root&quot;&gt;&#10;      &lt;button className=&quot;back&quot; onClick={onBack}&gt;⬅ Back&lt;/button&gt;&#10;&#10;      &lt;div className=&quot;upload-card&quot;&gt;&#10;        &lt;h2&gt;Upload document&lt;/h2&gt;&#10;&#10;        &lt;div&#10;          className=&quot;dropzone&quot;&#10;          onDrop={onDrop}&#10;          onDragOver={onDragOver}&#10;          onClick={() =&gt; inputRef.current &amp;&amp; inputRef.current.click()}&#10;          role=&quot;button&quot;&#10;          tabIndex={0}&#10;        &gt;&#10;          &lt;input ref={inputRef} type=&quot;file&quot; onChange={onChoose} hidden /&gt;&#10;          {!file ? (&#10;            &lt;div className=&quot;dz-empty&quot;&gt;&#10;              &lt;div className=&quot;dz-icon&quot;&gt;&lt;/div&gt;&#10;              &lt;div&gt;Trage un fișier aici sau dă click pentru a alege&lt;/div&gt;&#10;              &lt;div className=&quot;dz-note&quot;&gt;Max 10 MB. Tipuri acceptate: orice (demo)&lt;/div&gt;&#10;            &lt;/div&gt;&#10;          ) : (&#10;            &lt;div className=&quot;dz-hasfile&quot;&gt;&#10;              &lt;div className=&quot;file-meta&quot;&gt;&#10;                &lt;div className=&quot;file-name&quot;&gt;{file.name}&lt;/div&gt;&#10;                &lt;div className=&quot;file-info&quot;&gt;{(file.size / 1024).toFixed(1)} KB — {file.type || 'unknown'}&lt;/div&gt;&#10;              &lt;/div&gt;&#10;              {preview &amp;&amp; (&#10;                &lt;div className=&quot;file-preview&quot;&gt;&#10;                  &lt;img src={URL.createObjectURL(file)} alt=&quot;preview&quot; /&gt;&#10;                &lt;/div&gt;&#10;              )}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        {error &amp;&amp; &lt;div className=&quot;upload-error&quot;&gt;{error}&lt;/div&gt;}&#10;&#10;        &lt;div className=&quot;upload-actions&quot;&gt;&#10;          &lt;button className=&quot;btn&quot; onClick={() =&gt; { inputRef.current &amp;&amp; (inputRef.current.value = null); setFile(null) }}&gt;Clear&lt;/button&gt;&#10;          &lt;button className=&quot;btn primary&quot; onClick={onUpload} disabled={!file || uploading}&gt;{uploading ? 'Uploading...' : 'Upload'}&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div style={{marginTop:12,color:'rgba(230,238,248,0.7)'}}&gt;&#10;          (Demo offline) — pentru upload real dezactivează simularea și setează endpoint-ul în cod.&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}&#10;&#10;" />
              <option name="updatedContent" value="import React, { useState, useRef } from 'react'&#10;import './Upload.css'&#10;&#10;export default function Upload({ onBack = () =&gt; {} }) {&#10;  const [file, setFile] = useState(null)&#10;  const [error, setError] = useState(null)&#10;  const [uploading, setUploading] = useState(false)&#10;  const inputRef = useRef(null)&#10;&#10;  function onChoose(e) {&#10;    const f = (e.target &amp;&amp; e.target.files &amp;&amp; e.target.files[0]) || null&#10;    handleFile(f)&#10;  }&#10;&#10;  function handleFile(f) {&#10;    setError(null)&#10;    if (!f) return setFile(null)&#10;    // basic client-side validation: size limit 10MB&#10;    if (f.size &gt; 10 * 1024 * 1024) {&#10;      setError('Fișierul este prea mare (max 10 MB)')&#10;      return&#10;    }&#10;&#10;    // Accept only PDF files: check MIME type and fallback to extension check&#10;    const name = (f.name || '').toLowerCase()&#10;    const isPdfMime = f.type === 'application/pdf'&#10;    const hasPdfExt = name.endsWith('.pdf')&#10;    if (!isPdfMime &amp;&amp; !hasPdfExt) {&#10;      setError('Doar fișiere PDF sunt permise')&#10;      return&#10;    }&#10;&#10;    setFile(f)&#10;  }&#10;&#10;  function onDrop(e) {&#10;    e.preventDefault()&#10;    e.stopPropagation()&#10;    const f = (e.dataTransfer &amp;&amp; e.dataTransfer.files &amp;&amp; e.dataTransfer.files[0]) || null&#10;    handleFile(f)&#10;  }&#10;&#10;  function onDragOver(e) { e.preventDefault(); e.stopPropagation() }&#10;&#10;  async function onUpload() {&#10;    if (!file) return setError('Alege un fișier înainte de upload')&#10;    setUploading(true)&#10;    setError(null)&#10;&#10;    try {&#10;      // Demo: we won't actually send the file unless you enable endpoint.&#10;      // Example POST using FormData (uncomment &amp; set URL to use):&#10;      // const form = new FormData();&#10;      // form.append('file', file);&#10;      // const res = await fetch('http://localhost:5000/api/upload', { method: 'POST', body: form });&#10;      // const json = await res.json();&#10;&#10;      // Simulate delay&#10;      await new Promise((r) =&gt; setTimeout(r, 700))&#10;      console.log('Uploaded (demo):', file.name, file.size, file.type)&#10;      alert('Upload demo complet: ' + file.name)&#10;      setFile(null)&#10;    } catch (e) {&#10;      console.error(e)&#10;      setError('Eroare la upload (demo)')&#10;    } finally {&#10;      setUploading(false)&#10;    }&#10;  }&#10;&#10;  // Only PDFs are allowed; no image preview&#10;&#10;  return (&#10;    &lt;div className=&quot;upload-root&quot;&gt;&#10;      &lt;button className=&quot;back&quot; onClick={onBack}&gt;⬅ Back&lt;/button&gt;&#10;&#10;      &lt;div className=&quot;upload-card&quot;&gt;&#10;        &lt;h2&gt;Upload document&lt;/h2&gt;&#10;&#10;        &lt;div&#10;          className=&quot;dropzone&quot;&#10;          onDrop={onDrop}&#10;          onDragOver={onDragOver}&#10;          onClick={() =&gt; inputRef.current &amp;&amp; inputRef.current.click()}&#10;          role=&quot;button&quot;&#10;          tabIndex={0}&#10;        &gt;&#10;          &lt;input ref={inputRef} type=&quot;file&quot; onChange={onChoose} accept=&quot;application/pdf,.pdf&quot; hidden /&gt;&#10;          {!file ? (&#10;            &lt;div className=&quot;dz-empty&quot;&gt;&#10;              &lt;div className=&quot;dz-icon&quot;&gt;&lt;/div&gt;&#10;              &lt;div&gt;Trage un fișier aici sau dă click pentru a alege&lt;/div&gt;&#10;              &lt;div className=&quot;dz-note&quot;&gt;Max 10 MB. Tipuri acceptate: PDF doar&lt;/div&gt;&#10;            &lt;/div&gt;&#10;          ) : (&#10;            &lt;div className=&quot;dz-hasfile&quot;&gt;&#10;              &lt;div className=&quot;file-meta&quot;&gt;&#10;                &lt;div className=&quot;file-name&quot;&gt;{file.name}&lt;/div&gt;&#10;                &lt;div className=&quot;file-info&quot;&gt;{(file.size / 1024).toFixed(1)} KB — {file.type || 'unknown'}&lt;/div&gt;&#10;              &lt;/div&gt;&#10;              {/* PDF preview is not shown in demo; could add pdf.js preview later */}&#10;            &lt;/div&gt;&#10;          )}&#10;        &lt;/div&gt;&#10;&#10;        {error &amp;&amp; &lt;div className=&quot;upload-error&quot;&gt;{error}&lt;/div&gt;}&#10;&#10;        &lt;div className=&quot;upload-actions&quot;&gt;&#10;          &lt;button className=&quot;btn&quot; onClick={() =&gt; { inputRef.current &amp;&amp; (inputRef.current.value = null); setFile(null) }}&gt;Clear&lt;/button&gt;&#10;          &lt;button className=&quot;btn primary&quot; onClick={onUpload} disabled={!file || uploading}&gt;{uploading ? 'Uploading...' : 'Upload'}&lt;/button&gt;&#10;        &lt;/div&gt;&#10;&#10;        &lt;div style={{marginTop:12,color:'rgba(230,238,248,0.7)'}}&gt;&#10;          (Demo offline) — pentru upload real dezactivează simularea și setează endpoint-ul în cod.&#10;        &lt;/div&gt;&#10;      &lt;/div&gt;&#10;    &lt;/div&gt;&#10;  )&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>